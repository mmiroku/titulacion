<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition template="../templates/layout.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:utils="http://java.sun.com/jsf/composite/utils">

	<ui:define name="tabSinodales">
	
	#{cMaestro.init}
	<p:growl id="msgsMaestros"/>
	        <p:outputPanel id="tblMaestros">	    	           
	           <p:dataTable var="maestro" value="#{pMaestro.maestros}" emptyMessage="No existen maestros registrados.">	               
	               <p:column headerText="A. Paterno">
                       <h:outputText value="#{maestro.aPaterno}"/>
                   </p:column>
                   <p:column headerText="A. Materno">
                       <h:outputText value="#{maestro.aMaterno}"/>
                   </p:column>
                   <p:column headerText="Nombre(s)">
                       <h:outputText value="#{maestro.nombre}"/>
                   </p:column>
                   <p:column headerText="Titulo">
                       <h:outputText value="#{maestro.titulo}"/>
                   </p:column>
                   <p:column headerText="Año Ingreso">
                       <h:outputText value="#{maestro.anioIngreso}">
                       		<f:convertDateTime pattern="dd-MM-yyyy" />
                       </h:outputText>
                   </p:column>
                   <p:column headerText="Academia">
                       <h:outputText value="#{maestro.academia.nombre}"/>
                   </p:column>
                   <p:column headerText="Abreviatura">
                       <h:outputText value="#{maestro.abreviatura}" />
                   </p:column>
                   <p:column style="vertical-align:middle; width:7%;">  
                       <f:facet name="header">
                           <h:outputText />
                       </f:facet>
                       <p:commandButton id="btnEditMaestro" icon="ui-icon-pencil" onclick="wizEdit.loadStep(wizEdit.cfg.steps[0], true); dlgEdit.show();" process="@this" action="#{cMaestro.seleccionarMaestro(maestro)}" />
                       <p:tooltip for="btnEditMaestro" value="Editar" showEffect="fade" hideEffect="fade" />
                   </p:column>
                   <p:column style="vertical-align:middle; width:7%;">  
                       <f:facet name="header">
                           <h:outputText />
                       </f:facet>
                       <p:commandButton id="btnDelMaestro" icon="ui-icon-trash" onclick="dlgDel.show();" process="@this" action="#{pMaestro.setMaestro(maestro)}" />
                       <p:tooltip for="btnDelMaestro" value="Eliminar" showEffect="fade" hideEffect="fade" />
                   </p:column>                                      
	           </p:dataTable>	    
	      </p:outputPanel>
	     	     	      	      	    
		  <utils:wizardMaestro id="idNew" wizard="wizNew" widgetVar="dlgNew" panel="pnlNew" header="Nuevo Maestro" isEdit="false" action="#{cMaestro.guardarMaestro()}"/>
		  <utils:wizardMaestro id="idEdit" wizard="wizEdit" widgetVar="dlgEdit" panel="pnlEdit" header="Editar Maestro" isEdit="true" action="#{cMaestro.actualizarMaestro()}"/>
		  	     	     	      	      	    
	      <p:confirmDialog message="¿Está seguro que desea eliminar al maestro #{pMaestro.maestro.nombre}?" header="Eliminar" severity="alert" widgetVar="dlgDel" appendToBody="true">
            <p:commandButton value="Sí" action="#{cMaestro.eliminarMaestro}" oncomplete="dlgDel.hide();" />
            <p:commandButton value="No" onclick="dlgDel.hide();"/>
          </p:confirmDialog>
	</ui:define>
	<ui:define name="right">
	<h:form id="formRight">	
	   <h:panelGrid style="padding: 10px;">
	    <p:fieldset legend="Acciones">
	       <h:panelGrid>
			    <p:commandButton value="Nuevo Maestro" action="#{cMaestro.limpiarMaestro()}" onclick="wizNew.loadStep(wizNew.cfg.steps[0], true); dlgNew.show();"/>			    
	       </h:panelGrid>
	    </p:fieldset>
	    <br/>
	    <p:fieldset legend="Filtrar">
	    	<p:outputPanel id="pnlFiltro">
	       <h:panelGrid>
	       <h:outputText value="Nombre"/>
	       <p:inputText value="#{pMaestro.filtro.nombre}"/>
	       <h:outputText value="Abreviatura"/>
           <p:inputText value="#{pMaestro.filtro.abreviatura}"/>
           <h:outputText value="Titulo"/>
           <p:inputText value="#{pMaestro.filtro.titulo}"/>
           <h:outputText value="Academia"/>
           <p:selectOneMenu value="#{pMaestro.filtro.academia}" converter="AcademiaConverter">
           		<f:selectItem itemLabel=""/>
				<f:selectItems value="#{pCatalogo.academias}" var="academia" itemLabel="#{academia.nombre}" itemValue="#{academia}"/>
           </p:selectOneMenu>           
           <br/>
		     <p:commandButton value="Buscar" action="#{cMaestro.filtrarMaestros()}" style="float: right;"/>
           </h:panelGrid>
           </p:outputPanel>
	    </p:fieldset>
	    </h:panelGrid>	      	     
</h:form>
	</ui:define>
</ui:composition>